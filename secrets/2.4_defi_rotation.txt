2.4 Défi : Rotation des secrets (10 min)

1. Implémente une méthode pour mettre à jour un secret sans interruption de service :
   - Crée un nouveau secret avec un mot de passe mis à jour :
     echo "newsecretpassword" | docker secret create db_password_new -

2. Met à jour le fichier docker-compose.yml pour utiliser le nouveau secret :
   - Remplace db_password par db_password_new dans la section secrets :
     version: '3.7'
     services:
       postgres:
         image: postgres
         secrets:
           - db_password_new
         environment:
           POSTGRES_PASSWORD_FILE: /run/secrets/db_password_new

       web:
         image: nginx
         ports:
           - "8080:80"
         depends_on:
           - postgres

     secrets:
       db_password_new:
         external: true

3. Redémarre le service pour appliquer le nouveau secret :
   docker-compose up -d
