2.2 Exercice : Création et utilisation de secrets (20 min)

1. Crée un secret contenant un mot de passe pour une base de données :
   - Pour créer un secret dans Docker, exécute cette commande :
     echo "supersecretpassword" | docker secret create db_password -

2. Lance un conteneur PostgreSQL en utilisant ce secret :
   - Crée un répertoire pour la configuration de PostgreSQL :
     New-Item -Path "C:/Users/alvin/Documents/Ynov/tp-docker/secrets" -ItemType Directory

   - Crée un fichier docker-compose.yml pour PostgreSQL :
     New-Item -Path "C:/Users/alvin/Documents/Ynov/tp-docker/secrets/docker-compose.yml" -ItemType File

   - Ajoute ce contenu dans le fichier docker-compose.yml :
     version: '3.7'
     services:
       postgres:
         image: postgres
         secrets:
           - db_password
         environment:
           POSTGRES_PASSWORD_FILE: /run/secrets/db_password

     secrets:
       db_password:
         external: true

3. Lance le service en utilisant Docker Compose :
   cd C:/Users/alvin/Documents/Ynov/tp-docker/secrets
   docker-compose up -d
